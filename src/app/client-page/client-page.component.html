<app-header>Client Info</app-header>

<div *ngIf="context === 0" class="card-body text-center text-muted">
  <div class="mb-20 card-body text-muted">
    No contact selected.<br>
    Please select a contact before proceeding.<br>
  </div>
  <a class="btn btn-primary" routerLink="/contacts">Go to Contacts</a>
</div>

<ng-container *ngIf="context > 0">
  <div class="card">
    <div class="card-title">Overview</div>
    <div class="card-body text-center">
      <ng-container *ngIf="!contactLoading">
        <div>
          <div class="h4" style="line-height: 1.3;">{{ (contactData?.netWorth / 1000000000) | currency }} B</div>
          <div class="text-muted">Net worth</div>
          <h1 class="h4 text-truncate">{{ contactData?.lastName }}, {{ contactData?.firstName }}</h1>
          <div class="text-muted mb-10">{{ contactData?.type }}</div>
        </div>
      </ng-container>
      <ng-container *ngIf="contactLoading">
        <div>
          <div class="skeleton mx-auto w-25 mb-10"></div>
          <div class="skeleton mx-auto w-50"></div>
        </div>
      </ng-container>
    </div>
  </div>
  <div class="card">
    <div class="card-title">Notes</div>
    <ng-container *ngIf="!notesLoading">
      <div *ngIf="notesData?.length <= 0" class="card-body text-center text-muted">
        {{ notesError || 'No records to show.' }}
      </div>
      <div *ngIf="!notesError && notesData?.length > 0">
        <div *ngFor="let note of notesData" class="card-body list-item">
          <div class="text-primary text-truncate">{{ note?.title }}</div>
          <div class="text-clamp text-small">{{ note?.description }}</div>
          <div class="text-muted text-truncate text-small">{{ note?.occurredOn | date: 'EEEE, MMM d, y, h:mm a' }}</div>
        </div>
      </div>
    </ng-container>
    <div *ngIf="notesLoading">
      <div *ngFor="let loader of loaders" class="card-body list-item">
        <div class="skeleton w-50"></div>
        <div class="skeleton w-75"></div>
        <div class="skeleton w-35"></div>
      </div>
    </div>
  </div>
</ng-container>
